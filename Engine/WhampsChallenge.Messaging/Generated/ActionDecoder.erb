<%
	require 'json'

	file = nil
	File.open('../../Library/common/contract.json', 'r') do |f|
		file = JSON.load(f)
	end
%>
// Generated file, so ReSharper-Checks are disabled. 
// ReSharper disable all

using System;
using System.Collections.Generic; 
using Newtonsoft.Json.Linq; 
using WhampsChallenge.Core.Common;

using WhampsChallenge.Messaging.Common;

<% file.each_pair do |level, leveldata| %>
namespace WhampsChallenge.Messaging.<%= level %>.Actions {
	using WhampsChallenge.Core.<%= level %>.Actions;

	public class ActionDecoder : Common.ActionDecoder {

	    public ActionDecoder() {
<%          leveldata['Actions'].each_pair do |action, actiondata| %>
            registeredTypes.Add("<%= action %>", typeof(<%= action %>));
<%          end %>
	    }

	}
}

<% end %>
